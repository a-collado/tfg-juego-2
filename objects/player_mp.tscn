[gd_scene load_steps=13 format=3 uid="uid://c1opkas2hjrjk"]

[ext_resource type="PackedScene" uid="uid://nklwmh4e4jwg" path="res://objects/player.tscn" id="1_r5irm"]
[ext_resource type="Shader" uid="uid://rmua1fkabo1e" path="res://assets/Shaders/3D/bat_trail.tres" id="2_alae8"]
[ext_resource type="Texture2D" uid="uid://bei3ssi477w76" path="res://assets/Modelos 3D/jammo/textures/jammo_albedo_alpha.png" id="2_uphta"]
[ext_resource type="Texture2D" uid="uid://027637t71n23" path="res://assets/Modelos 3D/trail/trail_textura_text.png" id="3_3mryi"]
[ext_resource type="Texture2D" uid="uid://bjji2tdq3g46n" path="res://assets/Modelos 3D/jammo/textures/jammo_ambientocclusion.png" id="3_ulhec"]
[ext_resource type="Texture2D" uid="uid://koq1m0etqnc2" path="res://assets/Modelos 3D/jammo/textures/jammo_metal_smoothness.png" id="4_e4dj2"]
[ext_resource type="Texture2D" uid="uid://b3fydf6yxrwcc" path="res://assets/Modelos 3D/jammo/textures/jammo_normal.png" id="5_lvwfs"]

[sub_resource type="Shader" id="Shader_41ici"]
code = "// NOTE: Shader automatically converted from Godot Engine 4.3.stable's StandardMaterial3D.

shader_type spatial;
render_mode blend_mix, depth_draw_opaque, cull_back, diffuse_burley, specular_schlick_ggx;

uniform bool enemy;

uniform vec4 albedo : source_color;
uniform sampler2D texture_albedo : source_color, filter_linear_mipmap, repeat_enable;
uniform float point_size : hint_range(0.1, 128.0, 0.1);

uniform float roughness : hint_range(0.0, 1.0);
uniform sampler2D texture_metallic : hint_default_white, filter_linear_mipmap, repeat_enable;
uniform vec4 metallic_texture_channel;
uniform sampler2D texture_roughness : hint_roughness_r, filter_linear_mipmap, repeat_enable;

uniform float specular : hint_range(0.0, 1.0, 0.01);
uniform float metallic : hint_range(0.0, 1.0, 0.01);

uniform sampler2D texture_normal : hint_roughness_normal, filter_linear_mipmap, repeat_enable;
uniform float normal_scale : hint_range(-16.0, 16.0);

uniform sampler2D texture_ambient_occlusion : hint_default_white, filter_linear_mipmap, repeat_enable;
uniform vec4 ao_texture_channel;
uniform float ao_light_affect : hint_range(0.0, 1.0, 0.01);

uniform vec3 uv1_scale;
uniform vec3 uv1_offset;
uniform vec3 uv2_scale;
uniform vec3 uv2_offset;

void vertex() {
	UV = UV * uv1_scale.xy + uv1_offset.xy;
}

void fragment() {
	vec2 base_uv = UV;

	vec4 albedo_tex = texture(texture_albedo, base_uv);
	ALBEDO = albedo.rgb * albedo_tex.rgb;
	// Intercambiamos el canal x y el z para invertir los colores
	if (enemy){
		ALBEDO = vec3(ALBEDO.z, ALBEDO.y, ALBEDO.x);
	}

	float metallic_tex = dot(texture(texture_metallic, base_uv), metallic_texture_channel);
	METALLIC = metallic_tex * metallic;
	SPECULAR = specular;

	vec4 roughness_texture_channel = vec4(1.0, 0.0, 0.0, 0.0);
	float roughness_tex = dot(texture(texture_roughness, base_uv), roughness_texture_channel);
	ROUGHNESS = roughness_tex * roughness;

	// Normal Map: Enabled
	NORMAL_MAP = texture(texture_normal, base_uv).rgb;
	NORMAL_MAP_DEPTH = normal_scale;

	// Ambient Occlusion: Enabled
	AO = dot(texture(texture_ambient_occlusion, base_uv), ao_texture_channel);
	AO_LIGHT_AFFECT = ao_light_affect;
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rtcyx"]
resource_local_to_scene = true
render_priority = 0
shader = SubResource("Shader_41ici")
shader_parameter/enemy = false
shader_parameter/albedo = Color(1, 1, 1, 1)
shader_parameter/point_size = 1.0
shader_parameter/roughness = 1.0
shader_parameter/metallic_texture_channel = null
shader_parameter/specular = 0.5
shader_parameter/metallic = 1.0
shader_parameter/normal_scale = 2.0
shader_parameter/ao_texture_channel = null
shader_parameter/ao_light_affect = 0.0
shader_parameter/uv1_scale = Vector3(1, 1, 1)
shader_parameter/uv1_offset = Vector3(0, 0, 0)
shader_parameter/uv2_scale = Vector3(1, 1, 1)
shader_parameter/uv2_offset = Vector3(0, 0, 0)
shader_parameter/texture_albedo = ExtResource("2_uphta")
shader_parameter/texture_metallic = ExtResource("4_e4dj2")
shader_parameter/texture_normal = ExtResource("5_lvwfs")
shader_parameter/texture_ambient_occlusion = ExtResource("3_ulhec")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_7rsgk"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("2_alae8")
shader_parameter/progress = 0.0
shader_parameter/Texture = ExtResource("3_3mryi")

[sub_resource type="ViewportTexture" id="ViewportTexture_3b4y1"]
viewport_path = NodePath("hitManager/SubViewport")

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_e4784"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath(".:id")
properties/1/spawn = true
properties/1/replication_mode = 0
properties/2/path = NodePath("animationManager:is_moving")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("animationManager:hit_ball")
properties/3/spawn = true
properties/3/replication_mode = 1
properties/4/path = NodePath("animationManager:is_idle")
properties/4/spawn = true
properties/4/replication_mode = 1
properties/5/path = NodePath("root:rotation")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath("hitNodes:rotation")
properties/6/spawn = true
properties/6/replication_mode = 1

[node name="Player" instance=ExtResource("1_r5irm")]

[node name="Skeleton3D" parent="root" index="0"]
bones/2/position = Vector3(0.000191063, 0.0162169, -0.000324203)
bones/2/rotation = Quaternion(-0.042676, -0.367661, -0.0127588, 0.928893)
bones/3/rotation = Quaternion(0.0465279, 0.0388194, -0.0103435, 0.998109)
bones/4/rotation = Quaternion(0.0924762, 0.0799328, -0.0167082, 0.992361)
bones/5/rotation = Quaternion(0.080582, 0.0803383, -0.0159557, 0.993377)
bones/6/rotation = Quaternion(0.0119989, -0.0107738, 0.00136514, 0.999869)
bones/7/rotation = Quaternion(-0.0129574, 0.177012, -0.0173141, 0.983971)
bones/11/rotation = Quaternion(0.465886, 0.521678, -0.504933, 0.505812)
bones/12/rotation = Quaternion(0.595967, -0.0959794, 0.00459404, 0.797239)
bones/13/rotation = Quaternion(0.027992, 0.0566234, 0.419757, 0.905436)
bones/14/rotation = Quaternion(-0.137431, 0.181603, -0.0108586, 0.973661)
bones/15/rotation = Quaternion(0.260614, 0.212384, 0.259611, 0.905304)
bones/16/rotation = Quaternion(-0.00297115, 0.134215, -0.0319805, 0.990432)
bones/17/rotation = Quaternion(4.73019e-08, 0.0435342, -1.1627e-08, 0.999052)
bones/19/rotation = Quaternion(0.0390726, -0.0265759, 0.0916424, 0.99467)
bones/20/rotation = Quaternion(0.155025, 0.00412753, -0.0109271, 0.987842)
bones/21/rotation = Quaternion(-2.91038e-11, 1.02459e-17, 3.52048e-07, 1)
bones/23/rotation = Quaternion(0.132354, -0.0242753, -0.0414454, 0.990038)
bones/24/rotation = Quaternion(0.203992, 0.0119416, 0.00740919, 0.978872)
bones/25/rotation = Quaternion(-1.35635e-06, -0.00292555, -0.000449612, 0.999996)
bones/27/rotation = Quaternion(0.29772, -0.0295619, -0.122297, 0.946326)
bones/28/rotation = Quaternion(0.350041, 0.0119071, 0.0392328, 0.935837)
bones/29/rotation = Quaternion(-4.07365e-10, -7.63062e-17, -1.87317e-07, 1)
bones/31/rotation = Quaternion(0.513189, -0.474206, 0.477579, 0.532619)
bones/32/rotation = Quaternion(0.541104, 0.0600749, 0.220793, 0.809227)
bones/33/rotation = Quaternion(0.0910375, 0.0128703, -0.360021, 0.928403)
bones/34/rotation = Quaternion(0.120078, -0.0986898, -0.0525035, 0.986451)
bones/35/rotation = Quaternion(0.173282, -0.072995, -0.303854, 0.93398)
bones/36/rotation = Quaternion(0.0697323, -0.127394, 0.1981, 0.969363)
bones/37/rotation = Quaternion(-8.84919e-08, -0.0435343, 3.14176e-08, 0.999052)
bones/39/rotation = Quaternion(0.0393608, 0.0318273, -0.0214389, 0.998488)
bones/40/rotation = Quaternion(0.15685, -0.0047498, 0.0143463, 0.987507)
bones/41/rotation = Quaternion(-2.91038e-11, -1.02459e-17, -3.52048e-07, 1)
bones/43/rotation = Quaternion(0.10572, 0.0359979, -0.00258484, 0.993741)
bones/44/rotation = Quaternion(0.31311, -0.0111611, -0.00826816, 0.949615)
bones/45/rotation = Quaternion(-1.35271e-06, 0.00292566, 0.000449672, 0.999996)
bones/47/rotation = Quaternion(0.202366, 0.000390842, 0.0644711, 0.977185)
bones/48/rotation = Quaternion(0.374146, -0.0133621, -0.0589501, 0.925398)
bones/49/rotation = Quaternion(-4.07365e-10, 7.63062e-17, 1.87317e-07, 1)
bones/51/rotation = Quaternion(0.0711361, 0.23374, 0.962711, -0.116162)
bones/52/rotation = Quaternion(-0.306471, 0.127947, -0.0180699, 0.943069)
bones/53/rotation = Quaternion(0.568319, -0.0542827, -0.0575568, 0.818996)
bones/54/rotation = Quaternion(0.192027, -0.0168147, 0.0980065, 0.976339)
bones/56/rotation = Quaternion(-0.133265, -0.0944624, 0.978499, 0.125927)
bones/57/rotation = Quaternion(-0.227366, 0.0607595, -0.0752125, 0.968997)
bones/58/rotation = Quaternion(0.700329, 0.130051, 0.150566, 0.685534)
bones/59/rotation = Quaternion(0.184226, 0.0346814, -0.12437, 0.974367)

[node name="ankle_low" parent="root/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="chest_low" parent="root/Skeleton3D" index="1"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="ear_joint_low" parent="root/Skeleton3D" index="2"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="ears_low" parent="root/Skeleton3D" index="3"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="feet_low" parent="root/Skeleton3D" index="4"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="finger_index_low" parent="root/Skeleton3D" index="5"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="finger_middle_low" parent="root/Skeleton3D" index="6"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="finger_pinky_low" parent="root/Skeleton3D" index="7"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="finger_thumb_low" parent="root/Skeleton3D" index="8"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="forearm_low" parent="root/Skeleton3D" index="9"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="head_main_low" parent="root/Skeleton3D" index="11"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="head_mohawk_low" parent="root/Skeleton3D" index="12"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="head_screen_low" parent="root/Skeleton3D" index="13"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="heels_low" parent="root/Skeleton3D" index="14"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="palm_low" parent="root/Skeleton3D" index="15"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="pelvis_low" parent="root/Skeleton3D" index="16"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="scarf_low" parent="root/Skeleton3D" index="17"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="screw_low" parent="root/Skeleton3D" index="18"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="shin_low" parent="root/Skeleton3D" index="19"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="shoulder_low" parent="root/Skeleton3D" index="20"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="thigh_low" parent="root/Skeleton3D" index="21"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="torso_mid_low" parent="root/Skeleton3D" index="22"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="upperarm_low" parent="root/Skeleton3D" index="23"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="wrist_low" parent="root/Skeleton3D" index="24"]
surface_material_override/0 = SubResource("ShaderMaterial_rtcyx")

[node name="Trail" parent="hitNodes/hitDirection" index="0"]
material_override = SubResource("ShaderMaterial_7rsgk")

[node name="AnimationTree" parent="animationManager" index="0"]
parameters/bat/Blend2/blend_amount = 0
parameters/bat/TimeScale/scale = 1.0

[node name="Sprite3D" parent="hitManager" index="1"]
texture = SubResource("ViewportTexture_3b4y1")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="." index="6"]
replication_config = SubResource("SceneReplicationConfig_e4784")

[editable path="root"]
